<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">
<sqlMap namespace="userTaobao">
    <!-- 取别名 -->
    <typeAlias alias="UserTaobao" type="com.raycloud.pojo.UserTaobao"/>

    <sql id="fields">

        taobao_id,
        taobao_nick,
        session_id,
        is_vip,
        shop_id,
        shop_type,
        db_config,
        modified,
        created,
        version
    </sql>
    <sql id="fieldsAs">

        taobao_id as taobaoId,
        taobao_nick as taobaoNick,
        session_id as sessionId,
        is_vip as isVip,
        shop_id as shopId,
        shop_type as shopType,
        db_config as dbConfig,
        modified,
        created,
        version
    </sql>

    <sql id="limit">
        limit $startRow$,$pageSize$
    </sql>

    <insert id="addUserTaobao" parameterClass="UserTaobao">
        insert into user_taobao(<include refid="fields"></include>)
        values(
           #taobao_id#,
           #taobao_nick#,
           #session_id#,
           #is_vip#,
           #shop_id#,
           #shop_type#,
           #db_config#,
           #modified#,
           #created#,
           #version#
        )
        <selectKey resultClass="long" keyProperty="id">
            <![CDATA[
                select last_insert_id() as id
            ]]>
        </selectKey>
    </insert>

    <update id="updateUserTaobao" parameterClass="UserTaobao">
        update user_taobao
        <dynamic prepend="set">
            <isNotEmpty property="taobao_nick" prepend=",">
                taobao_nick = #taobao_nick#
            </isNotEmpty>
            <isNotEmpty property="session_id" prepend=",">
                session_id = #session_id#
            </isNotEmpty>
            <isNotEmpty property="db_config" prepend=",">
                db_config = #db_config#
            </isNotEmpty>
        </dynamic>
    </update>

    <select id="getUserTaobaoByTaobaoId" parameterClass="long" resultClass="UserTaobao">
        select id,<include refid="fields"></include>
        from user_taobao
        where taobao_id = #taobao_id#
    </select>








</sqlMap>
